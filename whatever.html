<html>

<head>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script>

		async function yourMom() {

			// get textarea value
			var text = document.getElementById("code").value;
			console.log(text);
			let generated = "";
			await fetch('https://data.mongodb-api.com/app/triggers_realmapp-fhchj/endpoint/codes',
				{
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({
						"message": text,
						"code": "function() { console.log('Hello World!'); }"
					})
				})
				.then(function (response) {
					return response.json();

				})
				.then(function (myJson) {

					generated = text + myJson;
					console.log(myJson);
				});

			console.log(generated);
			//print result to result div

			generated = hljs.highlightAuto(generated).value;
			document.getElementById("result").innerHTML = generated;
		}

	</script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/dark.min.css">
	<script type="module">
		import hljs from 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/es/highlight.min.js';
		//  and it's easy to individually load additional languages
		import go from 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/es/languages/go.min.js';
		hljs.registerLanguage('go', go);
	</script>
	<style>
		.hljs {
			background: #282a36;
			color: #f8f8f2;
		}

		#result {
			height: 100vh;
			width: 100vw;
		}
	</style>
	<script>
		function updateHighlight() {
			// needs to auto highlight
			hljs.initHighlightingOnLoad();
		}
	</script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"
		integrity="sha512-/Swpp6aCQ0smuZ+zpklJqMClcUlvxhpLf9aAcM7JjJrj2waCU4dikm3biOtMVAflOOeniW9qzaNXNrbOAOWFCw=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/plugins/autoloader/prism-autoloader.min.js"
		integrity="sha512-GP4x8UWxWyh4BMbyJGOGneiTbkrWEF5izsVJByzVLodP8CuJH/n936+yQDMJJrOPUHLgyPbLiGw2rXmdvGdXHA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-css.min.js"
		integrity="sha512-Jv/EO8zjSyqIDa2S0YjCGFY+mEROxud6g7AhfA0KcggjdzhPBhoRyetxV7G7/dnfBdZBzcOvpRn1K+J6sn3jyw=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
	<div class="container">
		<textarea onkeyup="" id="code" class="hljs" rows="10" cols="50"></textarea>
		<button onclick="yourMom()">Click me</button>
		<button type="submit" onclick="yourMom()" class="btn btn-primary">Submit</button>

	</div>
	<!-- space -->


	<!-- card -->
	<pre><code class="text-wrap hljs" id="result"></code></pre>

	<script>
		var toastTrigger = document.getElementById('liveToastBtn')
		var toastLiveExample = document.getElementById('liveToast')
		if (toastTrigger) {
			toastTrigger.addEventListener('click', function () {
				var toast = new bootstrap.Toast(toastLiveExample)

				toast.show()
			})
		}
	</script>
</body>

</html>